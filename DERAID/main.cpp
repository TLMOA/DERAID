#include <iostream>
#include <chrono>
using namespace std;

unsigned long long a2[512][5]={


        231,217,200,236,0,
        65,35,58,26,0,
        6,175,167,247,0,
        205,34,52,18,0,
        255,145,91,98,0,
        15,19,119,112,0,
        199,84,120,33,0,
        94,45,109,92,0,
        251,87,96,150,0,
        174,136,201,254,0,
        31,192,219,183,0,
        101,102,202,44,0,
        207,6,39,184,0,
        22,100,83,13,0,
        133,44,130,209,0,
        169,183,93,46,0,
        89,52,244,30,0,
        8,219,102,201,0,
        139,37,183,42,0,
        95,240,67,244,0,
        66,152,142,173,0,
        104,87,247,80,0,
        192,180,88,127,0,
        164,78,14,48,0,
        198,125,96,131,0,
        57,144,23,160,0,
        96,157,188,99,0,
        162,167,133,141,0,
        26,251,60,241,0,
        208,35,123,2,0,
        89,31,134,116,0,
        45,136,72,80,0,
        211,172,216,238,0,
        11,38,203,92,0,
        96,191,16,164,0,
        21,149,183,182,0,
        201,217,141,155,0,
        159,109,27,158,0,
        172,183,56,109,0,
        149,108,46,47,0,
        32,182,173,228,0,
        111,62,147,96,0,
        9,221,2,236,0,
        54,104,60,136,0,
        48,193,107,94,0,
        64,98,255,224,0,
        175,24,237,110,0,
        182,53,132,242,0,
        174,51,235,213,0,
        174,106,23,250,0,
        182,48,10,50,0,
        222,69,59,206,0,
        159,5,179,136,0,
        209,185,87,238,0,
        39,199,17,229,0,
        213,75,16,42,0,
        176,189,152,10,0,
        110,1,244,43,0,
        16,171,70,121,0,
        230,95,211,152,0,
        80,13,217,241,0,
        47,136,191,195,0,
        183,152,116,254,0,
        248,54,157,230,0,
        50,150,124,105,0,
        109,85,29,88,0,
        137,117,137,64,0,
        17,177,172,210,0,
        217,205,14,128,0,
        236,119,170,224,0,
        27,170,134,118,0,
        220,215,145,218,0,
        90,211,67,125,0,
        16,89,166,204,0,
        170,103,71,89,0,
        125,226,196,12,0,
        71,33,229,112,0,
        29,18,99,120,0,
        218,5,90,178,0,
        87,218,189,240,0,
        140,11,34,166,0,
        72,50,229,38,0,
        113,63,99,63,0,
        51,192,215,7,0,
        155,126,234,208,0,
        242,161,233,183,0,
        41,41,189,78,0,
        191,225,224,139,0,
        1,95,33,166,0,
        49,90,113,176,0,
        230,44,81,138,0,
        112,172,194,240,0,
        235,222,239,142,0,
        8,111,106,95,0,
        142,194,219,87,0,
        250,21,210,66,0,
        48,56,249,100,0,
        194,123,126,34,0,
        146,208,83,247,0,
        217,22,38,211,0,
        234,152,115,194,0,
        39,244,124,237,0,
        253,45,1,129,0,
        81,123,124,207,0,
        1,154,143,103,0,
        104,36,217,223,0,
        244,165,152,178,0,
        206,82,72,219,0,
        169,15,176,130,0,
        98,190,133,214,0,
        253,41,168,174,0,
        171,161,253,211,0,
        134,66,201,15,0,
        56,182,29,130,0,
        144,2,96,228,0,
        120,248,65,73,0,
        27,29,248,85,0,
        176,108,103,110,0,
        220,136,51,41,0,
        208,208,220,9,0,
        216,19,6,250,0,
        244,59,251,221,0,
        35,133,227,83,0,
        29,242,75,251,0,
        171,223,19,155,0,
        97,188,191,54,0,
        16,71,159,30,0,
        57,23,242,184,0,
        154,147,41,141,0,
        55,189,55,93,0,
        161,207,126,249,0,
        28,192,181,107,0,
        85,116,214,110,0,
        81,176,26,126,0,
        19,157,197,37,0,
        126,155,159,151,0,
        109,11,206,137,0,
        42,59,166,41,0,
        124,195,179,122,0,
        223,198,116,170,0,
        201,50,191,136,0,
        109,49,85,55,0,
        224,140,176,61,0,
        42,148,117,155,0,
        35,215,170,215,0,
        40,35,4,153,0,
        162,118,41,23,0,
        56,73,172,248,0,
        2,158,61,139,0,
        63,126,45,248,0,
        116,17,155,123,0,
        131,185,146,123,0,
        6,160,195,136,0,
        202,103,134,43,0,
        140,158,80,225,0,
        220,74,28,203,0,
        217,139,87,250,0,
        240,5,84,124,0,
        110,100,141,1,0,
        109,50,109,106,0,
        114,128,88,247,0,
        188,43,224,151,0,
        151,105,227,237,0,
        53,27,51,140,0,
        103,37,201,240,0,
        195,125,88,21,0,
        234,158,56,85,0,
        11,211,113,38,0,
        96,189,55,127,0,
        45,184,10,31,0,
        145,173,231,202,0,
        41,248,124,72,0,
        250,208,68,245,0,
        157,131,140,144,0,
        199,59,81,221,0,
        65,124,231,185,0,
        204,52,50,64,0,
        81,218,249,114,0,
        196,86,120,236,0,
        20,86,162,183,0,
        4,252,142,92,0,
        106,47,252,69,0,
        8,97,119,69,0,
        246,124,255,228,0,
        75,144,151,80,0,
        107,200,228,228,0,
        182,232,233,254,0,
        36,246,25,22,0,
        1,96,124,30,0,
        62,166,198,122,0,
        31,191,255,51,0,
        109,229,188,2,0,
        24,255,146,105,0,
        125,135,54,125,0,
        57,11,43,152,0,
        27,99,168,84,0,
        57,238,247,49,0,
        241,150,5,193,0,
        196,132,195,237,0,
        66,47,99,204,0,
        5,8,194,58,0,
        105,7,144,200,0,
        111,94,52,222,0,
        222,154,149,209,0,
        193,76,184,208,0,
        111,77,150,188,0,
        148,178,86,185,0,
        56,210,109,82,0,
        30,29,186,96,0,
        213,232,5,98,0,
        111,254,118,67,0,
        130,197,77,115,0,
        112,78,22,61,0,
        29,75,240,42,0,
        133,174,148,50,0,
        246,149,175,119,0,
        213,104,96,108,0,
        101,82,80,232,0,
        36,137,3,145,0,
        32,32,78,7,0,
        123,24,54,96,0,
        170,77,61,103,0,
        59,213,46,210,0,
        151,103,97,83,0,
        241,48,215,159,0,
        99,138,36,74,0,
        59,148,116,10,0,
        175,220,125,13,0,
        102,73,177,184,0,
        212,222,129,127,0,
        128,109,249,229,0,
        69,126,213,168,0,
        81,148,223,200,0,
        217,38,245,74,0,
        245,230,109,176,0,
        86,46,116,11,0,
        24,190,91,224,0,
        84,230,160,106,0,
        102,24,49,225,0,
        255,19,33,81,0,
        23,76,178,214,0,
        90,90,13,192,0,
        154,229,198,57,0,
        190,253,245,17,0,
        211,6,154,31,0,
        238,249,104,99,0,
        83,85,115,166,0,
        12,19,9,183,0,
        236,5,220,18,0,
        243,179,152,234,0,
        15,248,167,201,0,
        207,127,74,54,0,
        102,45,85,31,0,
        97,5,18,173,0,
        75,184,107,186,0,
        67,112,211,110,0,
        167,253,146,104,0,
        68,82,45,140,0,
        127,213,168,92,0,
        65,70,184,32,0,
        141,209,178,245,0,
        183,235,21,211,0,
        186,51,37,42,0,
        145,170,168,92,0,
        3,230,67,116,0,
        229,255,47,213,0,
        232,106,228,115,0,
        8,165,100,236,0,
        102,44,119,83,0,
        129,154,97,195,0,
        102,167,161,59,0,
        121,171,174,30,0,
        119,45,188,43,0,
        132,47,14,18,0,
        163,65,49,6,0,
        194,222,142,144,0,
        149,244,14,230,0,
        161,250,26,213,0,
        199,217,52,212,0,
        203,238,66,17,0,
        208,75,142,185,0,
        130,144,30,163,0,
        213,156,176,142,0,
        211,16,58,232,0,
        102,233,162,24,0,
        109,189,123,133,0,
        215,186,117,186,0,
        2,128,165,105,0,
        77,77,38,48,0,
        209,176,224,221,0,
        146,75,192,130,0,
        159,254,86,209,0,
        62,247,16,150,0,
        79,68,118,32,0,
        70,244,14,89,0,
        139,191,60,8,0,
        7,29,40,173,0,
        133,97,133,235,0,
        229,11,155,40,0,
        202,211,30,119,0,
        244,192,171,69,0,
        172,159,113,23,0,
        184,59,241,187,0,
        170,170,226,193,0,
        113,114,168,45,0,
        128,67,244,245,0,
        117,7,131,221,0,
        81,4,100,57,0,
        2,82,249,3,0,
        217,16,33,7,0,
        48,216,174,215,0,
        156,59,54,5,0,
        222,153,15,110,0,
        207,11,168,173,0,
        181,116,23,51,0,
        192,125,237,242,0,
        234,184,105,84,0,
        7,102,238,173,0,
        11,32,172,238,0,
        66,49,154,117,0,
        114,38,227,66,0,
        249,79,215,35,0,
        51,176,217,129,0,
        179,44,114,125,0,
        105,2,181,85,0,
        93,116,88,111,0,
        49,186,178,131,0,
        201,218,191,216,0,
        155,44,236,38,0,
        209,97,134,160,0,
        220,232,31,187,0,
        96,44,59,211,0,
        159,134,62,78,0,
        58,177,239,85,0,
        50,107,21,73,0,
        95,2,106,255,0,
        87,182,4,172,0,
        64,64,89,188,0,
        148,92,191,244,0,
        70,226,111,124,0,
        188,180,132,75,0,
        174,134,83,65,0,
        81,3,120,198,0,
        38,73,20,106,0,
        249,68,134,102,0,
        179,88,218,76,0,
        204,227,65,223,0,
        49,212,121,74,0,
        80,55,94,56,0,
        84,154,87,194,0,
        218,186,171,213,0,
        24,112,57,50,0,
        1,158,207,128,0,
        80,34,201,215,0,
        244,56,63,45,0,
        215,144,233,241,0,
        234,150,217,235,0,
        134,82,118,170,0,
        15,130,19,147,0,
        234,217,62,221,0,
        166,112,36,35,0,
        177,93,188,38,0,
        123,48,239,227,0,
        31,77,124,61,0,
        88,95,240,180,0,
        171,200,136,29,0,
        191,90,152,130,0,
        216,73,126,141,0,
        157,128,127,99,0,
        240,13,246,92,0,
        227,142,185,164,0,
        37,230,86,82,0,
        85,69,76,170,0,
        191,214,249,20,0,
        142,174,80,215,0,
        178,109,26,30,0,
        26,59,217,139,0,
        37,182,66,49,0,
        2,187,15,235,0,
        124,97,152,118,0,
        82,41,115,142,0,
        26,100,137,79,0,
        175,239,15,21,0,
        57,30,213,136,0,
        129,46,126,70,0,
        198,108,7,188,0,
        78,89,57,253,0,
        218,23,195,1,0,
        113,28,247,90,0,
        8,95,113,243,0,
        192,143,183,23,0,
        213,114,21,228,0,
        32,59,65,171,0,
        79,79,49,90,0,
        129,250,178,60,0,
        59,94,102,155,0,
        201,118,31,237,0,
        247,241,3,240,0,
        236,62,18,134,0,
        147,112,237,99,0,
        80,101,59,76,0,
        15,11,24,248,0,
        131,187,190,243,0,
        242,76,220,90,0,
        156,23,139,117,0,
        44,81,151,247,0,
        199,87,198,66,0,
        118,3,57,168,0,
        113,132,97,51,0,
        163,36,61,83,0,
        26,70,190,56,0,
        7,48,110,112,0,
        224,19,138,41,0,
        10,107,48,203,0,
        112,83,214,73,0,
        77,178,247,188,0,
        106,177,244,224,0,
        123,71,162,173,0,
        218,186,211,112,0,
        25,196,254,194,0,
        55,55,201,15,0,
        150,66,35,137,0,
        110,46,8,253,0,
        246,138,99,131,0,
        167,32,100,184,0,
        25,127,86,158,0,
        95,249,59,49,0,
        90,198,27,197,0,
        111,64,196,40,0,
        134,193,169,253,0,
        64,59,111,165,0,
        57,79,225,146,0,
        225,184,60,77,0,
        122,71,158,243,0,
        171,33,63,191,0,
        195,178,8,223,0,
        224,142,113,183,0,
        53,128,89,149,0,
        191,7,231,237,0,
        185,84,210,202,0,
        7,37,62,229,0,
        88,162,87,147,0,
        236,66,155,228,0,
        160,44,81,165,0,
        168,166,180,58,0,
        190,98,135,162,0,
        224,179,10,20,0,
        110,18,190,101,0,
        203,91,199,225,0,
        243,242,97,228,0,
        134,247,89,87,0,
        103,51,104,108,0,
        247,226,138,173,0,
        78,177,14,73,0,
        145,3,117,65,0,
        19,114,46,235,0,
        19,236,241,228,0,
        55,158,145,107,0,
        15,58,155,111,0,
        215,147,251,183,0,
        133,51,61,77,0,
        5,47,175,59,0,
        56,245,121,81,0,
        101,199,240,194,0,
        156,176,242,61,0,
        245,54,253,111,0,
        139,187,227,62,0,
        59,199,240,170,0,
        40,75,53,66,0,
        50,29,64,127,0,
        109,206,6,196,0,
        190,223,69,147,0,
        206,245,154,123,0,
        120,125,16,96,0,
        23,174,96,116,0,
        41,216,181,161,0,
        45,104,99,64,0,
        216,170,64,94,0,
        16,105,248,9,0,
        58,158,125,120,0,
        252,147,22,114,0,
        216,37,198,147,0,
        104,137,181,12,0,
        148,120,185,147,0,
        42,126,201,122,0,
        137,39,2,81,0,
        60,123,244,84,0,
        17,129,104,192,0,
        21,20,4,181,0,
        227,230,164,36,0,
        136,221,134,132,0,
        137,26,66,189,0,
        98,127,48,190,0,
        100,164,185,27,0,
        243,166,121,82,0,
        87,231,183,113,0,
        109,120,139,39,0,
        240,76,6,149,0,
        165,132,39,68,0,
        253,208,184,219,0,
        64,190,102,26,0,
        78,241,81,195,0,
        164,137,12,246,0,
        142,99,100,127,0,
        129,60,95,170,0,
        215,158,103,217,0,
        111,240,42,247,0,
        212,89,123,18,0,
        107,102,133,79,0,
        89,177,66,156,0,
        233,24,57,227,0,
        80,120,57,108,0,


};



unsigned long long m=252;

void DERAID5(unsigned long long n){
    unsigned long long i,j;
    for(j=0;j<512;j++){
        a2[j][n-1]=(m^a2[j][n-2]);
        for(i=3;i>=1;i--){
            a2[j][i]=(a2[j][i]^a2[j][i-1]);
        }
        a2[j][0]=(a2[j][0]^m);
    }
}


void DERAID51(unsigned long long n){
    unsigned long long i,j,k;
    for(j=0;j<512;j++){
        k=(m^a2[j][0]);
        cout<<k<<" ";
        for(i=1;i<n-1;i++) {

            k=k^a2[j][i];
            cout<<k<<" ";
//            if(k!=t[j][i]&&k!=222)cout<<"!"<<endl;
        }
        cout<<endl;
    }



}

void DERAID52(unsigned long long n,unsigned long long index,unsigned long long data){
    unsigned long long j,k;
    for(j=0;j<512;j++){
        unsigned long long i=1;
        k=(m^a2[j][0]);
        unsigned long long x=k;
        if(index==1) {
            a2[j][0]=(m^data);
            k=(k^a2[j][1]);
            a2[j][1]=(data^k);
        }else if(index>1&&index<4

                ){

            while(i!=index+1) {

                k=k^a2[j][i];
                if(i==index-2)x=k;
                i++;
            }
            a2[j][index]=(k^data);
            a2[j][index-1]=(x^data);
        }else{
            while(i!=index-1) {

                k=k^a2[j][i];
                i++;
            }
            a2[j][index]=(m^data);
            a2[j][index-1]=(k^data);
        }
    }


}

void DERAID53(unsigned long long n,unsigned long long index){
    unsigned long long i,j;
    unsigned long long q,p;
    for(j=0;j<512;j++){
        q=(a2[j][0]^m);
        for(i=1;i<=index-1;i++){
            q=(q^a2[j][i]);
        }
        p=(a2[j][n-1]^m);
        for(i=n-2;i>=index+1;i--){
            p=(p^a2[j][i]);
        }
        a2[j][index]=(q^p);
    }

}






int main() {




    auto start2 = chrono::high_resolution_clock::now(); // ??????

    DERAID5(5);


    auto end2 = chrono::high_resolution_clock::now(); // ???????

    chrono::duration<double, milli> elapsed2 = end2 - start2; // ???????????

    cout << "DERAID5 " << elapsed2.count() << " milliseconds." << endl;




    auto start22 = chrono::high_resolution_clock::now(); // 开始时间

    DERAID51(5);

    auto end22 = chrono::high_resolution_clock::now(); // 结束时间

    chrono::duration<double, milli> elapsed22 = end22 - start22; // 计算经过的时间


    cout<<"解码过程******************************************"<<endl;

    cout << "DERAID51 " << elapsed22.count() << " milliseconds." << endl;


    cout<<"更新过程******************************************"<<endl;



    auto start222 = chrono::high_resolution_clock::now(); // 开始时间

    DERAID52(5,3,222);

    auto end222 = chrono::high_resolution_clock::now(); // 结束时间

    chrono::duration<double, milli> elapsed222 = end222 - start222; // 计算经过的时间

    cout << "DERAID52 " << elapsed222.count() << " milliseconds." << endl;




    cout<<"重建过程******************************************"<<endl;


    auto start2222 = chrono::high_resolution_clock::now(); // 开始时间

    DERAID53(5,1);

    auto end2222 = chrono::high_resolution_clock::now(); // 结束时间

    chrono::duration<double, milli> elapsed2222 = end2222 - start2222; // 计算经过的时间

    cout << "DERAID53 " << elapsed2222.count() << " milliseconds." << endl;



    cout << "编码、解码、更新、重建：" << endl  ;
    cout << elapsed2.count() << endl  ;

    cout << elapsed22.count() << endl  ;

    cout << elapsed222.count() << endl ;
    
    cout << elapsed2222.count() <<endl ;
    return 0;
}